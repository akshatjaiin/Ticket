{% load static %}

<!DOCTYPE html>
<html lang="hi">
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>{% block title %}{% endblock %}</title>
    <link href="{% static 'css/styles.css' %}" rel="stylesheet">
    <script type="text/javascript" src="//translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"></script>
</head>
<body>
    <div id="google_translate_element" ></div> <!-- Hide the default Google Translate widget -->

    <div id="root" class="row">
        <div id="tickets-div" class="tickets-div disappear">
            <div id="tickets"></div>
        </div>
        <div class="sidenavbar">
            <h1>Museum</h1>
            <ul>
                <li><a href="{% url 'index' %}">Chat Bot</a></li>
                <li><a href="{% url 'index' %}">About</a></li>
                <li><a href="{% url 'index' %}">Location</a></li>
                <li><a href="{% url 'index' %}">Booked Ticket</a></li>
                <li><a href="{% url 'index' %}">Query</a></li>
                <li><a href="{% url 'about_museum' %}">About Museum</a></li>
                <li>{% block nav %}{% endblock %}</li>
            </ul>

            <select name="language" id="language">
                <!-- Options will be populated by JavaScript -->
            </select>

            <select name="setting" id="setting">
                <option value="setting">Setting</option>
                <option value="language">Language</option>
                <option value="support">Support</option>
                <option value="logout">Logout</option>
            </select>
        </div>

        <div class="chat-container">
            {% block body %}
            {% endblock %}
        </div>
    </div>

    <script src="{% static 'js/language.js' %}"></script>
    <script>
        // Initialize Google Translate
        function googleTranslateElementInit() {
            new google.translate.TranslateElement({
                pageLanguage: 'hi',
                includedLanguages: 'ar,bn,bg,zh-CN,zh-TW,hr,cs,da,nl,et,fa,fi,fr,de,gu,el,hi,hu,it,ja,ko,kn,lv,lt,ml,mr,no,pl,pt,ro,ru,sr,sk,sl,es,sw,su,ta,te,th,tr,uk,ur,vi',
                layout: google.translate.TranslateElement.InlineLayout.SIMPLE
            }, 'google_translate_element');
        }

        // Populate the select element with language options
        const LANGUAGES = {
            'ar': 'العربية',
            'bn': 'বাংলা',
            'bg': 'български',
            'zh-CN': '中文 (简体)',
            'zh-TW': '中文 (繁體)',
            'hr': 'hrvatski',
            'cs': 'čeština',
            'da': 'dansk',
            'nl': 'Nederlands',
            'et': 'eesti',
            'fa': 'فارسی',
            'fi': 'suomi',
            'fr': 'français',
            'de': 'Deutsch',
            'gu': 'ગુજરાતી',
            'el': 'ελληνικά',
            'hi': 'हिन्दी',
            'hu': 'magyar',
            'it': 'italiano',
            'ja': '日本語',
            'kn': 'ಕನ್ನಡ',
            'ko': '한국어',
            'lv': 'latviešu',
            'lt': 'lietuvių',
            'ml': 'മലയാളം',
            'mr': 'मराठी',
            'no': 'norsk',
            'pl': 'polski',
            'pt': 'português',
            'ro': 'română',
            'ru': 'русский',
            'sr': 'српски',
            'sk': 'slovenčina',
            'sl': 'slovenščina',
            'es': 'español',
            'sw': 'Kiswahili',
            'ta': 'தமிழ்',
            'te': 'తెలుగు',
            'th': 'ไทย',
            'tr': 'Türkçe',
            'uk': 'українська',
            'ur': 'اردو',
            'vi': 'Tiếng Việt'
        };

        // Populate the select element with language options
        const select = document.getElementById('language');
        for (const [code, name] of Object.entries(LANGUAGES)) {
            const option = document.createElement('option');
            option.value = code;
            option.textContent = name;
            select.appendChild(option);
        }

        // Function to change the page language
        function changeLanguage() {
            const selectedLang = select.value;
            if (google && google.translate) {
                // Directly use Google Translate API to set the page language
                const iframe = document.querySelector('iframe.goog-te-frame');
                if (iframe) {
                    const doc = iframe.contentDocument || iframe.contentWindow.document;
                    const frameLang = doc.documentElement;
                    frameLang.lang = selectedLang;
                }
            } else {
                console.error("Google Translate is not loaded.");
            }
        }

        select.addEventListener('change', changeLanguage);
    </script>
</body>
</html>
